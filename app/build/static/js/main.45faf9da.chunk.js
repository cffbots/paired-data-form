(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,n){e.exports=n(360)},185:function(e,t,n){},344:function(e,t,n){},360:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(30),i=n.n(o);n(185),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(186),n(187);var l=n(22),s=n(31);function m(){return r.createElement("div",null,r.createElement("h1",null,"Paired omics data platform"),r.createElement("p",null,"This Paired Data Platform is a community-based initiative standardizing links between genomic and metabolomics data in a computer-readable manner to further the field of natural products discovery."))}var c=n(361),u=[{_id:"/projects/MSV000078839.1",gnps:"MSV000078839",pi:"Justin van der Hooft",nr_genomes:3,nr_growth_conditions:3,nr_extraction_methods:3,nr_instrumentation_methods:1,nr_genome_metabolmics_links:21,nr_genecluster_mspectra_links:0}];function p(){var e=u.map(function(e){return r.createElement("tr",{key:e._id},r.createElement("td",null,r.createElement(l.Link,{to:e._id},e.gnps)),r.createElement("td",null,e.pi),r.createElement("td",null,e.nr_genomes),r.createElement("td",null,e.nr_growth_conditions),r.createElement("td",null,e.nr_extraction_methods),r.createElement("td",null,e.nr_instrumentation_methods),r.createElement("td",null,e.nr_genome_metabolmics_links),r.createElement("td",null,e.nr_genecluster_mspectra_links))});return r.createElement("div",null,r.createElement("h1",null,"List page with all approved datasets, search functionality"),r.createElement(c.a,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"GNPS Massive identifier"),r.createElement("th",null,"Principal investigator"),r.createElement("th",null,"Nr of (meta)genomes"),r.createElement("th",null,"Nr of growth conditions"),r.createElement("th",null,"Nr of extraction methods"),r.createElement("th",null,"Nr of instrumention methods"),r.createElement("th",null,"Nr of links between genomes and metabolomics"),r.createElement("th",null,"Nr of links between gene clusters and MS2 spectra"))),r.createElement("tbody",null,e)))}var d=n(168),h=n(362);function f(e,t,n){var a=new Map;return e.dependencies[t].oneOf.forEach(function(e){Object.keys(e.properties).filter(function(e){return e!==t}).forEach(function(t){a.set(t,r.createElement("th",{key:n+a.size},e.properties[t].title))})}),a}var _=function(e){if(!e.data.BGC_MS2_links)return r.createElement("p",null,"No links between gene clusters and MS2 spectra.");var t=e.schema.properties.BGC_MS2_links.items,n=t.properties,a=Object.keys(n).filter(function(e){return"link"!==e&&"BGC_ID"!==e}),o=[];a.forEach(function(e,t){var a=n[e];a.title?o.push(r.createElement("th",{key:t},a.title)):o.push(r.createElement("th",{key:t},e))});var i=f(t.properties.BGC_ID,"BGC",o.length),l=Array.from(i.keys()),s=f(t,"link",(o=o.concat(Array.from(i.values()))).length),m=Array.from(s.keys());o=o.concat(Array.from(s.values()));var u=e.data.BGC_MS2_links.map(function(e,t){var n=a.map(function(t,n){return"verification"===t?r.createElement("td",{key:n},e[t].join(";")):r.createElement("td",{key:n},e[t])}),o=l.map(function(t,a){return r.createElement("td",{key:n.length+a},e.BGC_ID[t])});n=n.concat(o);var i=m.map(function(t,a){return r.createElement("td",{key:n.length+a},e[t])});return n=n.concat(i),r.createElement("tr",{key:t},n)});return r.createElement(c.a,{condensed:!0,striped:!0,bordered:!0},r.createElement("thead",null,r.createElement("tr",null,r.createElement("td",{colSpan:a.length}),r.createElement("td",{colSpan:l.length},n.BGC_ID.title),r.createElement("td",{colSpan:m.length},n.link.title)),r.createElement("tr",null,o)),r.createElement("tbody",null,u))},v=n(37),E=n(18),g=n(19),b=function(){function e(t,n){Object(E.a)(this,e),this.fk="extraction_method_label",this.foreignTable="extraction_methods",this.labelField="extraction_method",this.schema=void 0,this.lookup=void 0,this.schema=t.properties.experimental.properties[this.foreignTable].items.properties,this.lookup=n.experimental[this.foreignTable]}return Object(g.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return r.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.cols(n).map(function(e,n){return r.createElement("td",{key:n+t},e)})}},{key:"headers",value:function(){var e=this;return Object.keys(this.schema).map(function(t){return e.schema[t].title})}},{key:"textCols",value:function(e){var t=this.find(e);return this.textColsOf(t)}},{key:"textColsOf",value:function(e){var t=this.schema.solvents.items.properties.solvent;return Object.keys(this.schema).map(function(n){var r=e[n];return"solvents"===n?r.map(function(e,n){var r=t.anyOf.find(function(t){return t.enum[0]===e.solvent}).title;return"Other solvent"===r?"".concat(e.Other_solvent,"=").concat(e.ratio):"".concat(r,"=").concat(e.ratio)}).join(";"):r})}},{key:"cols",value:function(e){var t=this.schema.solvents.items.properties.solvent;return Object.keys(this.schema).map(function(n){var a=e[n];return"solvents"===n?a.map(function(e,n){var o=t.anyOf.find(function(t){return t.enum[0]===e.solvent}).title,i=";";return a.length-1===n&&(i=""),"Other solvent"===o?r.createElement("span",{key:e.Other_solvent},e.Other_solvent,"=",e.ratio,i):r.createElement("span",{key:e.solvent},r.createElement("a",{href:e.solvent},o),"=",e.ratio,i)}):a})}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),k=function(){function e(t,n){Object(E.a)(this,e),this.fk="genome_label",this.foreignTable="genomes",this.labelField="genome_label",this.schema=void 0,this.lookup=void 0,this.schema=t.properties[this.foreignTable].items.properties,this.lookup=n[this.foreignTable]}return Object(g.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return r.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.cols(n).map(function(e,n){return r.createElement("td",{key:n+t},e)})}},{key:"headers",value:function(){var e=this,t=this.schema.genome_ID.dependencies.genome_type.oneOf,n=[];t.forEach(function(t){Object.keys(t.properties).forEach(function(r){"genome_type"===r?-1===n.indexOf(e.schema.genome_ID.title)&&n.push(e.schema.genome_ID.title):-1===n.indexOf(t.properties[r].title)&&n.push(t.properties[r].title)})});var r=Object.keys(this.schema).filter(function(e){return"genome_ID"!==e}).map(function(t){return e.schema[t].title});return n.concat(r)}},{key:"textCols",value:function(e){var t=this.find(e);return this.cols(t)}},{key:"cols",value:function(e){var t=this.schema.genome_ID.dependencies.genome_type.oneOf,n=[],r=[];t.forEach(function(t){Object.keys(t.properties).forEach(function(t){"genome_type"===t?-1===n.indexOf("genome_ID")&&(n.push("genome_ID"),r.push(e.genome_ID[t])):-1===n.indexOf(t)&&(n.push(t),r.push(e.genome_ID[t]))})});var a=Object.keys(this.schema).filter(function(e){return"genome_ID"!==e}).map(function(t){return e[t]});return r.concat(a)}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),y=function(){function e(t,n){Object(E.a)(this,e),this.fk="instrumentation_method_label",this.foreignTable="instrumentation_methods",this.labelField="instrumentation_method",this.schema=void 0,this.lookup=void 0,this.schema=t.properties.experimental.properties[this.foreignTable].items.properties,this.lookup=n.experimental[this.foreignTable]}return Object(g.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return r.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.htmlCols(n).map(function(e,n){return r.createElement("td",{key:n+t},e)})}},{key:"textCols",value:function(e){var t=this.find(e);return this.textColsOf(t)}},{key:"headers",value:function(){var e=this;return Object.keys(this.schema).map(function(t){return e.schema[t].title})}},{key:"htmlCols",value:function(e){var t=this.schema.instrumentation,n=this.schema.mode;return Object.keys(this.schema).map(function(a){var o=e[a];if("instrumentation"===a){var i=t.properties.instrument.anyOf.find(function(e){return e.enum[0]===o.instrument}).title;return"Other Mass Spectrometer"===i?r.createElement("span",{key:e.instrumentation.other_instrument},e.instrumentation.other_instrument):r.createElement("a",{key:o.instrument,href:o.instrument},i)}if("mode"===a){var l=n.anyOf.find(function(e){return e.enum[0]===o}).title;return r.createElement("a",{key:o,href:o},l)}return o})}},{key:"textColsOf",value:function(e){var t=this.schema.instrumentation,n=this.schema.mode;return Object.keys(this.schema).map(function(r){var a=e[r];if("instrumentation"===r){var o=t.properties.instrument.anyOf.find(function(e){return e.enum[0]===a.instrument}).title;return"Other Mass Spectrometer"===o?e.instrumentation.other_instrument:o}return"mode"===r?n.anyOf.find(function(e){return e.enum[0]===a}).title:a})}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),O=function(){function e(t,n){Object(E.a)(this,e),this.fk="sample_preparation_label",this.foreignTable="sample_preparation",this.labelField="sample_preparation_method",this.schema=void 0,this.lookup=void 0,this.schema=t.properties.experimental.properties[this.foreignTable].items.properties,this.lookup=n.experimental[this.foreignTable]}return Object(g.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return r.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.htmlCols(n).map(function(e,n){return r.createElement("td",{key:n+t},e)})}},{key:"headers",value:function(){var e=this,t=[this.schema.medium_details.properties.medium_type.title,this.schema.medium_details.properties.medium.title],n=Object.keys(this.schema).filter(function(e){return"medium_details"!==e}).map(function(t){return e.schema[t].title});return t.concat(n)}},{key:"textCols",value:function(e){var t=this.find(e);return this.textColsOf(t)}},{key:"textColsOf",value:function(e){var t=this.schema.medium_details.properties.medium,n=this.schema.metagenome_details.properties.environment,r=e.medium_details.medium_type,a=Object.keys(this.schema).map(function(r){var a=e[r];if("medium_details"===r){var o=t.anyOf.find(function(e){return e.enum[0]===a.medium}).title;return"other"===a.medium?a.Other_medium:o}if("metagenome_details"===r){if(!a.environment)return;var i=n.anyOf.find(function(e){return e.enum[0]===a.environment}).title;return"other"===a.environment?a.Other_environment:i}return a});return a.unshift(r),a}},{key:"htmlCols",value:function(e){var t=this.schema.medium_details.properties.medium,n=this.schema.metagenome_details.properties.environment,a=e.medium_details.medium_type,o=Object.keys(this.schema).map(function(a){var o=e[a];if("medium_details"===a){var i=t.anyOf.find(function(e){return e.enum[0]===o.medium}).title;return"other"===o.medium?r.createElement("span",null,o.Other_medium):r.createElement("a",{key:o.medium,href:o.medium},i)}if("metagenome_details"===a){if(!o.environment)return;var l=n.anyOf.find(function(e){return e.enum[0]===o.environment}).title;return"other"===o.environment?o.Other_environment:r.createElement("a",{key:o,href:o},l)}return o});return o.unshift(a),o}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),x=n(178);function S(e,t){return function(e,t){var n=[new k(e,t),new O(e,t),new b(e,t),new y(e,t)],r=e.properties.genome_metabolome_links.items.properties,a=new Set(n.map(function(e){return e.fk})),o=Object.keys(r).filter(function(e){return!a.has(e)}),i=o.map(function(e){return r[e].title});n.forEach(function(e){return e.headers().forEach(function(e){return i.push(e)})});var l=t.genome_metabolome_links.map(function(e,t){var r=o.map(function(t,n){return e[t]});return n.forEach(function(t){return t.textCols(e).forEach(function(e){return r.push(e)})}),r});return[i].concat(Object(x.a)(l))}(e,t).map(function(e){return e.join("\t")}).join("\n")}function w(e,t){var n=btoa(S(e,t));return"data:".concat("text/tab-separated-values",";base64,").concat(n)}function j(e,t){var n=t.find(function(t){return t.title===e});return n?n.enum[0]:n}function C(e,t){var n=[],r=new Set,a=[],o=new Set,i=[],l=new Set,s=[],m=new Set,c=t.map(function(t){var c=t["Location of metabolomics data file"],u=t["Genome Label"];r.has(u)||(n.push(function(e){var t={genome_ID:{genome_type:e["Genome or Metagenome"]},genome_label:e["Genome Label"]},n=e["GenBank accession number"];n&&(t.genome_ID.GenBank_accession=n);var r=e["RefSeq accession number"];r&&(t.genome_ID.RefSeq_accession=r);var a=e["ENA/NCBI accession number"];a&&(t.genome_ID.ENA_NCBI_accession=a);var o=e["MGnify accession number"];o&&(t.genome_ID.MGnify_accession=o);var i=e["BioSample accession number"];i&&(t.BioSample_accession=i);var l=e["Key publications"];return l&&(t.publications=l),t}(t)),r.add(u));var p=t["Sample Growth Conditions Label"];o.has(p)||(a.push(function(e,t){var n={sample_preparation_method:e["Sample Growth Conditions Label"],medium_details:{}},r=e["Medium type"];r&&(n.medium_details.medium_type=r);var a=e["Growth medium"];if(a){var o=j(a,t.properties.experimental.properties.sample_preparation.items.properties.medium_details.properties.medium.anyOf);o?n.medium_details.medium=o:n.medium_details.Other_medium=a}var i=e["Growth temperature"];i&&(n.growth_temperature=1*i);var l=e.Aeration;l&&(n.aeration=l);var s=e["Growth time"];s&&(n.growing_time=1*s);var m=e["Growth phase or OD"];m&&(n.growth_phase_OD=m);var c=e["Other growth conditions"];c&&(n.other_growth_conditions=c);var u=e["Metagenome details"],p=j(u,t.properties.experimental.properties.sample_preparation.items.properties.metagenome_details.properties.environment.anyOf);n.metagenome_details=p?{environment:p}:{Other_environment:u};var d=e["Metagenomic sample description"];return d&&(n.metagenomic_sample_description=d),n}(t,e)),o.add(p));var d=t["Extraction Method Label"];l.has(d)||(i.push(function(e,t){var n={extraction_method:e["Extraction Method Label"],solvents:[]};e["Extraction solvent"].split(";").forEach(function(e){var r=e.split("="),a=Object(v.a)(r,2),o=a[0],i=a[1],l=j(o,t.properties.experimental.properties.extraction_methods.items.properties.solvents.items.properties.solvent.anyOf);l?n.solvents.push({solvent:l,ratio:parseFloat(i)}):n.solvents.push({Other_solvent:o,ratio:parseFloat(i)})});var r=e["Other extraction details"];return r&&(n.other_extraction_parameters=r),n}(t,e)),l.add(d));var h=t["Instrumentation Method Label"];return m.has(h)||(s.push(function(e,t){var n={instrumentation_method:e["Instrumentation Method Label"]},r=e.Instrumentation,a=j(r,t.properties.experimental.properties.instrumentation_methods.items.properties.instrumentation.properties.instrument.anyOf);n.instrumentation=a?{instrument:a}:{other_instrument:r};var o=e["Column details"];o&&(n.column=o);var i=e["Instrument mode"];i&&(n.mode=j(i,t.properties.experimental.properties.instrumentation_methods.items.properties.mode.anyOf));var l=e["Mass range"];l&&(n.range=l);var s=e["Collision energy"];s&&(n.collision_energy=s);var m=e.Buffering;m&&(n.buffering=m);var c=e["Other instrumentation information"];return c&&(n.other_instrumentation=c),n}(t,e)),m.add(h)),{genome_label:u,metabolomics_file:c,sample_preparation_label:p,extraction_method_label:d,instrumentation_method_label:h}});return{version:"1",personal:{},metabolomics:{},genomes:n,experimental:{sample_preparation:a,extraction_methods:i,instrumentation_methods:s},genome_metabolome_links:c}}var D=function(e){if(!e.data.genome_metabolome_links||0===e.data.genome_metabolome_links.length)return r.createElement("p",null,"No links between (meta)genomes and metabolimics data files.");var t=new k(e.schema,e.data),n=new O(e.schema,e.data),a=new b(e.schema,e.data),o=new y(e.schema,e.data),i=e.schema.properties.genome_metabolome_links.items.properties,l=new Set([t.fk,n.fk,a.fk,o.fk]),s=Object.keys(i).filter(function(e){return!l.has(e)}),m=s.map(function(e){var t=i[e];return r.createElement("th",{key:e},t.title)}),u=t.ths(m.length);m=m.concat(u);var p=n.ths(m.length);m=m.concat(p);var f=a.ths(m.length);m=m.concat(f);var _=o.ths(m.length);m=m.concat(_);var E=e.data.genome_metabolome_links.map(function(e,i){var l=s.map(function(t,n){return"Metabolomics_Data_File"===t?r.createElement("td",{key:n},r.createElement("a",{href:e[t]},e[t])):r.createElement("td",{key:n},e[t])}),m=t.tds(e,l.length);l=l.concat(m);var c=n.tds(e,l.length);l=l.concat(c);var u=a.tds(e,l.length);l=l.concat(u);var p=o.tds(e,l.length);return l=l.concat(p),r.createElement("tr",{key:i},l)}),g="paired-"+e.data.metabolomics.GNPSMassIVE_ID+"-genome-metabolome.tsv",x=r.useState(!0),S=Object(v.a)(x,2),j=S[0],C=S[1],D=[0,8,18,21,29];return j&&(u.splice(0,u.length-1),p.splice(0,p.length-1),f.splice(0,f.length-1),_.splice(0,_.length-1),m=D.map(function(e){return m[e]}),E=E.map(function(e,t){return r.createElement("tr",{key:t},D.map(function(t){return e.props.children[t]}))})),r.createElement("div",null,r.createElement(c.a,{condensed:!0,striped:!0,bordered:!0},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:s.length},r.createElement(d.a,{bsSize:"xs",onClick:function(){return C(!j)},title:j?"Expand table, show all columns":"Collapse table, only show label columns"},r.createElement(h.a,{glyph:j?"plus":"minus"})," ",j?"Expand":"Collapse")),r.createElement("th",{colSpan:u.length},i[t.fk].title),r.createElement("th",{colSpan:p.length},i[n.fk].title),r.createElement("th",{colSpan:f.length},i[a.fk].title),r.createElement("th",{colSpan:_.length},i[o.fk].title)),r.createElement("tr",null,m)),r.createElement("tbody",null,E)),r.createElement("a",{href:w(e.schema,e.data),download:g},"tab delimited downoad"))};var M=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n=btoa(JSON.stringify(e,null,4));return"data:".concat(t,";base64,").concat(n)}(e.data),n=e.schema.properties.personal.properties,a=Object.keys(n).map(function(t){var a=n[t];return r.createElement("li",{key:t},a.title,": ",e.data.personal[t])}),o=e.schema.properties.metabolomics.properties,i=Object.keys(o).map(function(t){var n=o[t];return r.createElement("li",{key:t},n.title,": ",e.data.metabolomics[t])}),l=e.data.metabolomics.GNPSMassIVE_ID,s="paired_datarecord_".concat(l,".json");return r.createElement("div",null,r.createElement("h3",null,"iOMEGA Paired data record:"),r.createElement(d.a,{href:t,download:s},r.createElement(h.a,{glyph:"download"})," Download"),r.createElement("h2",null,"Submitter Information"),r.createElement("ul",null,a),r.createElement("h2",null,"Metabolomics project details"),r.createElement("ul",null,i),r.createElement("h2",null,"Links between genomes and metabolomics data"),r.createElement(D,{data:e.data,schema:e.schema}),r.createElement("h2",null,"Linked gene clusters and MS2 spectra"),r.createElement(_,{data:e.data,schema:e.schema}))},I=n(113),L=n.n(I),G=n(170),N=function(e){var t=Object(r.useState)(null),n=Object(v.a)(t,2),a=n[0],o=n[1];function i(){return(i=Object(G.a)(L.a.mark(function t(){var n,r;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,o(r);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(r.useEffect)(function(){!function(){i.apply(this,arguments)}()},[e]),a};function R(){var e=N("/examples/paired_datarecord_MSV000078839_example.json"),t=N("/schema.json"),n=r.createElement("span",null,"Loading ...");return e&&t&&(n=r.createElement("div",null,r.createElement(M,{data:e,schema:t}),r.createElement(l.Link,{to:"/projects/MSV000078839.1/edit"},"Edit"))),r.createElement("div",null,r.createElement("h1",null,"Item page for one dataset with a edit and clone button"),n)}var B=n(75),F=n(72),A=n(76),P=n(363),T=n(364),U=n(73),V=n.n(U),q=n(171),K=n.n(q),J=n(179),z=function(e){function t(){var e,n;Object(E.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(B.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(a)))).state={open:!1,options:[]},n.handleChange=function(e){n.props.onChange(e.value)},n.loadOptions=function(){return n.props.uiSchema.foreignKey.search(n.props.name).map(function(e){return{value:e,label:e}})},n.onOpen=function(){var e=n.loadOptions();n.setState({open:!0,options:e})},n.onClose=function(e){var t=e.value;n.setState({value:t,open:!1,options:[]},function(){n.props.onChange(t)})},n}return Object(A.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=r.createElement("span",{className:"form-control",onClick:this.onOpen},this.props.formData||"Click to select",r.createElement("span",{className:"pull-right"},r.createElement(h.a,{glyph:"chevron-down"})));return this.state.open&&this.state.options.length>0&&(e=r.createElement(J.a,{defaultValue:this.props.formData,onChange:this.onClose,options:this.state.options,menuIsOpen:!0})),r.createElement("div",null,r.createElement("label",null,this.props.schema.title),r.createElement("p",null,this.props.schema.description),e)}}]),t}(r.Component),H=n(176),W=n(110),$=n.n(W);n(344);function Q(e,t,n){return function(r){var a=e.formRef.current;if(!a)return[];var o=a.state.formData;if(!o)return[];if(r===t)return n(o);throw new Error("Invalid property name: "+r)}}function X(e){return e.genomes?e.genomes.map(function(e){return e.genome_label}):[]}function Y(e){return e.experimental.sample_preparation?e.experimental.sample_preparation.map(function(e){return e.sample_preparation_method}):[]}function Z(e){return e.experimental.extraction_methods?e.experimental.extraction_methods.map(function(e){return e.extraction_method}):[]}function ee(e){return void 0===e.experimental.instrumentation_methods?[]:e.experimental.instrumentation_methods.map(function(e){return e.instrumentation_method})}function te(e){return e.genome_metabolome_links?e.genome_metabolome_links.map(function(e){return e.metabolomics_file}):[]}function ne(e){return e.map(function(t,n){return e.indexOf(t)!==n?n:null}).filter(function(e){return null!==e})}function re(e,t){e.experimental.extraction_methods&&e.experimental.extraction_methods.forEach(function(e,n){e.solvents.reduce(function(e,t){return t.ratio+e},0)>1&&t.experimental.extraction_methods[n].solvents.addError("Combined ratio not within 0 and 1")});var n=X(e);ne(n).forEach(function(e){t.genomes[e].genome_label.addError("Non-unique label")});var r=Y(e);ne(r).forEach(function(e){t.experimental.sample_preparation[e].sample_preparation_method.addError("Non-unique label")});var a=Z(e);ne(a).forEach(function(e){t.experimental.extraction_methods[e].extraction_method.addError("Non-unique label")});var o=ee(e);if(ne(o).forEach(function(e){t.experimental.instrumentation_methods[e].instrumentation_method.addError("Non-unique label")}),e.genome_metabolome_links&&e.genome_metabolome_links.forEach(function(e,i){e.genome_label&&!n.includes(e.genome_label)&&t.genome_metabolome_links[i].genome_label.addError("Invalid selection"),e.sample_preparation_label&&!r.includes(e.sample_preparation_label)&&t.genome_metabolome_links[i].sample_preparation_label.addError("Invalid selection"),e.extraction_method_label&&!a.includes(e.extraction_method_label)&&t.genome_metabolome_links[i].extraction_method_label.addError("Invalid selection"),e.instrumentation_method_label&&!o.includes(e.instrumentation_method_label)&&t.genome_metabolome_links[i].instrumentation_method_label.addError("Invalid selection")}),e.BGC_MS2_links){var i=te(e);ne(i).forEach(function(e){t.genome_metabolome_links[e].metabolomics_file.addError("Non-unique label")}),e.BGC_MS2_links.forEach(function(e,n){e.MS2_URL&&!i.includes(e.MS2_URL)&&t.BGC_MS2_links[n].MS2_URL.addError("Invalid selection")})}return t}var ae={collapsible:K.a,foreignKey:z,gmarray:function(e){var t=r.useRef(null);return r.createElement("div",null,r.createElement($.a,e),r.createElement(d.a,{onClick:function(){t.current&&t.current.click()},title:"Upload links from tab delimited file, will replace existing links, (meta)genomes and metabolomics experimental details"},r.createElement(h.a,{glyph:"upload"})," Upload links",r.createElement("input",{type:"file",accept:"text/tab-separated-values,.tsv,.txt",onChange:function(t){if(t.target.files){var n=t.target.files[0],r=new FileReader;r.onload=function(){if(r.result){var t=Object(H.a)(r.result);e.formContext.uploadGenomeMetabolomeLinks(t)}},r.readAsText(n)}},ref:t,style:{display:"none"}})))}},oe=function(e){function t(e){var n;return Object(E.a)(this,t),(n=Object(B.a)(this,Object(F.a)(t).call(this,e))).state={schema:{},uiSchema:{},initDoc:{},validDoc:void 0},n.uploadRef=void 0,n.formRef=void 0,n.onSubmit=function(e){var t=e.formData;n.setState({validDoc:t,initDoc:t})},n.onReset=function(){n.setState({initDoc:{},validDoc:void 0})},n.onError=function(){void 0!==n.state.validDoc&&n.setState({validDoc:void 0})},n.uploadGenomeMetabolomeLinks=function(e){var t=C(n.state.schema,e),r=n.state.initDoc;r.genomes=t.genomes,r.experimental=t.experimental,r.genome_metabolome_links=t.genome_metabolome_links,r.personal||(r.personal={PI_email:void 0,PI_institution:void 0,PI_name:void 0,submitter_email:void 0,submitter_institution:void 0,submitter_name:void 0}),r.metabolomics||(r.metabolomics={GNPSMassIVE_ID:void 0,MaSSIVE_URL:void 0}),n.fillForm(r)},n.onUpload=function(){n.uploadRef.current&&n.uploadRef.current.click()},n.fillFormFromFile=function(e){if(e.target.files){var t=e.target.files[0],r=new FileReader;r.onload=function(e){if(r.result){var t=JSON.parse(r.result);n.fillForm(t)}},r.readAsText(t)}},n.loadExample1=function(){fetch("/examples/paired_datarecord_MSV000078839_example.json").then(function(e){return e.json()}).then(n.fillForm)},n.fillForm=function(e){n.setState({initDoc:e,validDoc:void 0},function(){var e=n.formRef.current;e&&e.submit()})},n.uploadRef=r.createRef(),n.formRef=r.createRef(),n}return Object(A.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/schema.json").then(function(e){return e.json()}).then(function(e){return delete e.$schema,e}).then(function(t){return e.setState({schema:t})}),fetch("/uischema.json").then(function(e){return e.json()}).then(function(t){!function(e,t){e.genome_metabolome_links.items.genome_label.foreignKey.search=Q(t,"genome_label",X),e.genome_metabolome_links.items.sample_preparation_label.foreignKey.search=Q(t,"sample_preparation_label",Y),e.genome_metabolome_links.items.extraction_method_label.foreignKey.search=Q(t,"extraction_method_label",Z),e.genome_metabolome_links.items.instrumentation_method_label.foreignKey.search=Q(t,"instrumentation_method_label",ee),e.BGC_MS2_links.items.MS2_URL.foreignKey.search=Q(t,"MS2_URL",te)}(t,e),e.setState({uiSchema:t})})}},{key:"render",value:function(){var e={uploadGenomeMetabolomeLinks:this.uploadGenomeMetabolomeLinks};return r.createElement("div",{className:"App"},Object.keys(this.state.schema).length>0&&Object.keys(this.state.uiSchema).length>0&&r.createElement(V.a,{schema:this.state.schema,uiSchema:this.state.uiSchema,fields:ae,formData:this.state.initDoc,onSubmit:this.onSubmit,onError:this.onError,validate:re,formContext:e,ref:this.formRef},r.createElement(P.a,null,r.createElement(T.a,null,r.createElement(d.a,{onClick:this.loadExample1,title:"Load example dataset"},r.createElement(h.a,{glyph:"paperclip"})," Example"),r.createElement(d.a,{onClick:this.onUpload,title:"Upload JSON file"},r.createElement(h.a,{glyph:"upload"})," Upload",r.createElement("input",{type:"file",accept:"application/json,.json",onChange:this.fillFormFromFile,ref:this.uploadRef,style:{display:"none"}}))),r.createElement(T.a,null,r.createElement(d.a,{type:"submit",bsStyle:"primary"},r.createElement(h.a,{glyph:"ok"})," Save"),r.createElement(d.a,{type:"reset",onClick:this.onReset},r.createElement(h.a,{glyph:"remove"})," Reset")))),this.state.validDoc&&r.createElement(M,{data:this.state.validDoc,schema:this.state.schema}))}}]),t}(r.Component);function ie(){return r.createElement("div",null,r.createElement("h1",null,"Add page for submitting a new dataset, prefilled when clone action"),r.createElement(oe,null))}function le(){return r.createElement("div",null,r.createElement("h1",null,"Edit page for submitting a new dataset, prefilled"))}var se=function(e){var t=e.onApprove,n=e.onDeny;return r.createElement(T.a,null,r.createElement(d.a,{bsStyle:"success",onClick:t},r.createElement(h.a,{glyph:"ok"})," Approve"),r.createElement(d.a,{bsStyle:"danger",onClick:n},r.createElement(h.a,{glyph:"remove"})," Deny"))},me=a.a.createContext({token:"",setToken:function(){}}),ce=[{_id:"/pending/MSV000078839.1",gnps:"MSV000078839",pi:"Justin van der Hooft",nr_genomes:3,nr_growth_conditions:3,nr_extraction_methods:3,nr_instrumentation_methods:1,nr_genome_metabolmics_links:21,nr_genecluster_mspectra_links:0}];function ue(){var e=Object(r.useContext)(me).token,t=ce.map(function(e){return r.createElement("tr",{key:e._id},r.createElement("td",null,r.createElement(se,{onDeny:function(){},onApprove:function(){}})),r.createElement("td",null,r.createElement(l.Link,{to:e._id},e.gnps)),r.createElement("td",null,e.pi),r.createElement("td",null,e.nr_genomes),r.createElement("td",null,e.nr_growth_conditions),r.createElement("td",null,e.nr_extraction_methods),r.createElement("td",null,e.nr_instrumentation_methods),r.createElement("td",null,e.nr_genome_metabolmics_links),r.createElement("td",null,e.nr_genecluster_mspectra_links))});return r.createElement("div",null,r.createElement("h1",null,"List page of pending datasets that require approval"),r.createElement(c.a,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Approve/Deny"),r.createElement("th",null,"GNPS Massive identifier"),r.createElement("th",null,"Principal investigator"),r.createElement("th",null,"Nr of (meta)genomes"),r.createElement("th",null,"Nr of growth conditions"),r.createElement("th",null,"Nr of extraction methods"),r.createElement("th",null,"Nr of instrumention methods"),r.createElement("th",null,"Nr of links between genomes and metabolomics"),r.createElement("th",null,"Nr of links between gene clusters and MS2 spectra"))),r.createElement("tbody",null,t)),r.createElement("span",null,"API Token = ",e))}function pe(){var e=Object(r.useContext)(me).token,t=N("/examples/paired_datarecord_MSV000078839_example.json"),n=N("/schema.json"),a=r.createElement("span",null,"Loading ...");return t&&n&&(a=r.createElement("div",null,r.createElement(se,{onDeny:function(){},onApprove:function(){}}),r.createElement(M,{data:t,schema:n}),r.createElement(se,{onDeny:function(){},onApprove:function(){}}))),r.createElement("div",null,r.createElement("h1",null,"Review page with buttons to (dis)approve dataset"),a,r.createElement("span",null,"API Token = ",e))}var de={title:"Reviewing pending projects requires login",type:"object",required:["username","password"],properties:{username:{type:"string",title:"Username",default:"admin"},password:{type:"string",title:"Password"}}},he=function(e){var t=e.onLogin;return r.createElement(V.a,{onSubmit:function(e){t(e.formData)},schema:de})},fe=function(e){var t=e.onLogout;return r.createElement(d.a,{onClick:t},"logout")},_e=function(e){var t=localStorage.getItem("pdb-token")?localStorage.getItem("pdb-token"):"",n=Object(r.useState)(t),a=Object(v.a)(n,2),o=a[0],i=a[1];return r.createElement(me.Provider,{value:{token:o,setToken:i}},o?r.createElement("div",null,r.createElement(s.d,e),r.createElement(fe,{onLogout:function(){i(""),localStorage.removeItem("pdb-token")}})):r.createElement(he,{onLogin:function(e){i(e.password),localStorage.setItem("pdb-token",e.password)}}))},ve=n(366),Ee=n(367),ge=n(365),be=n(78);i.a.render(a.a.createElement(function(){return r.createElement(l.BrowserRouter,null,r.createElement(ve.a,null,r.createElement(ve.a.Header,null,r.createElement(ve.a.Brand,null,r.createElement(l.Link,{to:"/"},"Paired data platform"))),r.createElement(Ee.a,null,r.createElement(be.LinkContainer,{to:"/projects"},r.createElement(ge.a,null,"List")),r.createElement(be.LinkContainer,{to:"/add"},r.createElement(ge.a,null,"Add")),r.createElement(be.LinkContainer,{to:"/pending"},r.createElement(ge.a,null,"Review")))),r.createElement(s.g,null,r.createElement(s.d,{path:"/",exact:!0,component:m}),r.createElement(s.d,{path:"/projects",exact:!0,component:p}),r.createElement(s.d,{path:"/add",exact:!0,component:ie}),r.createElement(s.d,{path:"/projects/:id/edit",component:le}),r.createElement(s.d,{path:"/projects/:id",component:R}),r.createElement(_e,{path:"/pending",exact:!0,component:ue}),r.createElement(_e,{path:"/pending/:id",component:pe})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[180,1,2]]]);
//# sourceMappingURL=main.45faf9da.chunk.js.map