(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){e.exports=n(314)},310:function(e,t,n){},311:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(35),o=n.n(i),s=n(12),l=n(13),m=n(57),c=n(55),u=n(58),h=n(317),p=n(318),f=n(152),d=n(315),v=n(137),_=n.n(v),b=n(138),k=n.n(b),g=n(153),y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,options:[]},n.handleChange=function(e){n.props.onChange(e.value)},n.loadOptions=function(){return n.props.uiSchema.foreignKey.search(n.props.name).map(function(e){return{value:e,label:e}})},n.onOpen=function(){var e=n.loadOptions();n.setState({open:!0,options:e})},n.onClose=function(e){var t=e.value;n.setState({value:t,open:!1,options:[]},function(){n.props.onChange(t)})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=a.createElement("span",{className:"form-control",onClick:this.onOpen},this.props.formData||"Click to select",a.createElement("span",{className:"pull-right"},a.createElement(d.a,{glyph:"chevron-down"})));return this.state.open&&this.state.options.length>0&&(e=a.createElement(g.a,{defaultValue:this.props.formData,onChange:this.onClose,options:this.state.options,menuIsOpen:!0})),a.createElement("div",null,a.createElement("label",null,this.props.schema.title),a.createElement("p",null,this.props.schema.description),e)}}]),t}(a.Component),E=n(148),O=n(91),x=n.n(O),S=n(316);function j(e,t,n){var r=new Map;return e.dependencies[t].oneOf.forEach(function(e){Object.keys(e.properties).filter(function(e){return e!==t}).forEach(function(t){r.set(t,a.createElement("th",{key:n+r.size},e.properties[t].title))})}),r}var w=function(e){if(!e.data.BGC_MS2_links)return a.createElement("p",null,"No links between gene clusters and MS2 spectra.");var t=e.schema.properties.BGC_MS2_links.items,n=t.properties,r=Object.keys(n).filter(function(e){return"link"!==e&&"BGC_ID"!==e}),i=[];r.forEach(function(e,t){var r=n[e];r.title?i.push(a.createElement("th",{key:t},r.title)):i.push(a.createElement("th",{key:t},e))});var o=j(t.properties.BGC_ID,"BGC",i.length),s=Array.from(o.keys()),l=j(t,"link",(i=i.concat(Array.from(o.values()))).length),m=Array.from(l.keys());i=i.concat(Array.from(l.values()));var c=e.data.BGC_MS2_links.map(function(e,t){var n=r.map(function(t,n){return"verification"===t?a.createElement("td",{key:n},e[t].join(";")):a.createElement("td",{key:n},e[t])}),i=s.map(function(t,r){return a.createElement("td",{key:n.length+r},e.BGC_ID[t])});n=n.concat(i);var o=m.map(function(t,r){return a.createElement("td",{key:n.length+r},e[t])});return n=n.concat(o),a.createElement("tr",{key:t},n)});return a.createElement(S.a,{condensed:!0,striped:!0,bordered:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",{colSpan:r.length}),a.createElement("td",{colSpan:s.length},n.BGC_ID.title),a.createElement("td",{colSpan:m.length},n.link.title)),a.createElement("tr",null,i)),a.createElement("tbody",null,c))},C=function(){function e(t,n){Object(s.a)(this,e),this.fk="extraction_method_label",this.foreignTable="extraction_methods",this.labelField="extraction_method",this.schema=void 0,this.lookup=void 0,this.schema=t.properties.experimental.properties[this.foreignTable].items.properties,this.lookup=n.experimental[this.foreignTable]}return Object(l.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return a.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.cols(n).map(function(e,n){return a.createElement("td",{key:n+t},e)})}},{key:"headers",value:function(){var e=this;return Object.keys(this.schema).map(function(t){return e.schema[t].title})}},{key:"textCols",value:function(e){var t=this.find(e);return this.textColsOf(t)}},{key:"textColsOf",value:function(e){var t=this.schema.solvents.items.properties.solvent;return Object.keys(this.schema).map(function(n){var a=e[n];return"solvents"===n?a.map(function(e,n){var a=t.anyOf.find(function(t){return t.enum[0]===e.solvent}).title;return"Other solvent"===a?"".concat(e.Other_solvent,"=").concat(e.ratio):"".concat(a,"=").concat(e.ratio)}).join(";"):a})}},{key:"cols",value:function(e){var t=this.schema.solvents.items.properties.solvent;return Object.keys(this.schema).map(function(n){var r=e[n];if("solvents"===n)return r.map(function(e,n){var i=t.anyOf.find(function(t){return t.enum[0]===e.solvent}).title,o=";";return r.length-1===n&&(o=""),"Other solvent"===i?a.createElement("span",{key:e.Other_solvent},e.Other_solvent,"=",e.ratio,o):a.createElement("span",{key:e.solvent},a.createElement("a",{href:e.solvent},i),"=",e.ratio,o)})})}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),D=function(){function e(t,n){Object(s.a)(this,e),this.fk="genome_label",this.foreignTable="genomes",this.labelField="genome_label",this.schema=void 0,this.lookup=void 0,this.schema=t.properties[this.foreignTable].items.properties,this.lookup=n[this.foreignTable]}return Object(l.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return a.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.cols(n).map(function(e,n){return a.createElement("td",{key:n+t},e)})}},{key:"headers",value:function(){var e=this,t=this.schema.genome_ID.dependencies.genome_type.oneOf,n=[];t.forEach(function(t){Object.keys(t.properties).forEach(function(a){"genome_type"===a?-1===n.indexOf(e.schema.genome_ID.title)&&n.push(e.schema.genome_ID.title):-1===n.indexOf(t.properties[a].title)&&n.push(t.properties[a].title)})});var a=Object.keys(this.schema).filter(function(e){return"genome_ID"!==e}).map(function(t){return e.schema[t].title});return n.concat(a)}},{key:"textCols",value:function(e){var t=this.find(e);return this.cols(t)}},{key:"cols",value:function(e){var t=this.schema.genome_ID.dependencies.genome_type.oneOf,n=[],a=[];t.forEach(function(t){Object.keys(t.properties).forEach(function(t){"genome_type"===t?-1===n.indexOf("genome_ID")&&(n.push("genome_ID"),a.push(e.genome_ID[t])):-1===n.indexOf(t)&&(n.push(t),a.push(e.genome_ID[t]))})});var r=Object.keys(this.schema).filter(function(e){return"genome_ID"!==e}).map(function(t){return e[t]});return a.concat(r)}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),I=function(){function e(t,n){Object(s.a)(this,e),this.fk="instrumentation_method_label",this.foreignTable="instrumentation_methods",this.labelField="instrumentation_method",this.schema=void 0,this.lookup=void 0,this.schema=t.properties.experimental.properties[this.foreignTable].items.properties,this.lookup=n.experimental[this.foreignTable]}return Object(l.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return a.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.htmlCols(n).map(function(e,n){return a.createElement("td",{key:n+t},e)})}},{key:"textCols",value:function(e){var t=this.find(e);return this.textColsOf(t)}},{key:"headers",value:function(){var e=this;return Object.keys(this.schema).map(function(t){return e.schema[t].title})}},{key:"htmlCols",value:function(e){var t=this.schema.instrumentation,n=this.schema.mode;return Object.keys(this.schema).map(function(r){var i=e[r];if("instrumentation"===r){var o=t.properties.instrument.anyOf.find(function(e){return e.enum[0]===i.instrument}).title;return"Other Mass Spectrometer"===o?a.createElement("span",{key:e.instrumentation.other_instrument},e.instrumentation.other_instrument):a.createElement("a",{key:i.instrument,href:i.instrument},o)}if("mode"===r){var s=n.anyOf.find(function(e){return e.enum[0]===i}).title;return a.createElement("a",{key:i,href:i},s)}return i})}},{key:"textColsOf",value:function(e){var t=this.schema.instrumentation,n=this.schema.mode;return Object.keys(this.schema).map(function(a){var r=e[a];if("instrumentation"===a){var i=t.properties.instrument.anyOf.find(function(e){return e.enum[0]===r.instrument}).title;return"Other Mass Spectrometer"===i?e.instrumentation.other_instrument:i}return"mode"===a?n.anyOf.find(function(e){return e.enum[0]===r}).title:r})}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),M=function(){function e(t,n){Object(s.a)(this,e),this.fk="sample_preparation_label",this.foreignTable="sample_preparation",this.labelField="sample_preparation_method",this.schema=void 0,this.lookup=void 0,this.schema=t.properties.experimental.properties[this.foreignTable].items.properties,this.lookup=n.experimental[this.foreignTable]}return Object(l.a)(e,[{key:"ths",value:function(e){return this.headers().map(function(t,n){return a.createElement("th",{key:n+e},t)})}},{key:"tds",value:function(e,t){var n=this.find(e);return this.htmlCols(n).map(function(e,n){return a.createElement("td",{key:n+t},e)})}},{key:"headers",value:function(){var e=this,t=[this.schema.medium_details.properties.medium_type.title,this.schema.medium_details.properties.medium.title],n=Object.keys(this.schema).filter(function(e){return"medium_details"!==e}).map(function(t){return e.schema[t].title});return t.concat(n)}},{key:"textCols",value:function(e){var t=this.find(e);return this.textColsOf(t)}},{key:"textColsOf",value:function(e){var t=this.schema.medium_details.properties.medium,n=this.schema.metagenome_details.properties.environment,a=e.medium_details.medium_type,r=Object.keys(this.schema).map(function(a){var r=e[a];if("medium_details"===a){var i=t.anyOf.find(function(e){return e.enum[0]===r.medium}).title;return"other"===r.medium?r.Other_medium:i}if("metagenome_details"===a){if(!r.environment)return;var o=n.anyOf.find(function(e){return e.enum[0]===r.environment}).title;return"other"===r.environment?r.Other_environment:o}return r});return r.unshift(a),r}},{key:"htmlCols",value:function(e){var t=this.schema.medium_details.properties.medium,n=this.schema.metagenome_details.properties.environment,r=e.medium_details.medium_type,i=Object.keys(this.schema).map(function(r){var i=e[r];if("medium_details"===r){var o=t.anyOf.find(function(e){return e.enum[0]===i.medium}).title;return"other"===i.medium?a.createElement("span",null,i.Other_medium):a.createElement("a",{key:i.medium,href:i.medium},o)}if("metagenome_details"===r){if(!i.environment)return;var s=n.anyOf.find(function(e){return e.enum[0]===i.environment}).title;return"other"===i.environment?i.Other_environment:a.createElement("a",{key:i,href:i},s)}return i});return i.unshift(r),i}},{key:"find",value:function(e){var t=this,n=e[this.fk];return this.lookup.find(function(e){return e[t.labelField]===n})}}]),e}(),L=n(151),G=n(150);function R(e,t){return function(e,t){var n=[new D(e,t),new M(e,t),new C(e,t),new I(e,t)],a=e.properties.genome_metabolome_links.items.properties,r=new Set(n.map(function(e){return e.fk})),i=Object.keys(a).filter(function(e){return!r.has(e)}),o=i.map(function(e){return a[e].title});n.forEach(function(e){return e.headers().forEach(function(e){return o.push(e)})});var s=t.genome_metabolome_links.map(function(e,t){var a=i.map(function(t,n){return e[t]});return n.forEach(function(t){return t.textCols(e).forEach(function(e){return a.push(e)})}),a});return[o].concat(Object(G.a)(s))}(e,t).map(function(e){return e.join("\t")}).join("\n")}function F(e,t){var n=btoa(R(e,t));return"data:".concat("text/tab-separated-values",";base64,").concat(n)}function B(e,t){var n=t.find(function(t){return t.title===e});return n?n.enum[0]:n}function N(e,t){var n=[],a=new Set,r=[],i=new Set,o=[],s=new Set,l=[],m=new Set,c=t.map(function(t){var c=t["Location of metabolomics data file"],u=t["Genome Label"];a.has(u)||(n.push(function(e){var t={genome_ID:{genome_type:e["Genome or Metagenome"]},genome_label:e["Genome Label"]},n=e["GenBank accession number"];n&&(t.genome_ID.GenBank_accession=n);var a=e["RefSeq accession number"];a&&(t.genome_ID.RefSeq_accession=a);var r=e["ENA/NCBI accession number"];r&&(t.genome_ID.ENA_NCBI_accession=r);var i=e["MGnify accession number"];i&&(t.genome_ID.MGnify_accession=i);var o=e["BioSample accession number"];o&&(t.BioSample_accession=o);var s=e["Key publications"];return s&&(t.publications=s),t}(t)),a.add(u));var h=t["Sample Growth Conditions Label"];i.has(h)||(r.push(function(e,t){var n={sample_preparation_method:e["Sample Growth Conditions Label"],medium_details:{}},a=e["Medium type"];a&&(n.medium_details.medium_type=a);var r=e["Growth medium"];if(r){var i=B(r,t.properties.experimental.properties.sample_preparation.items.properties.medium_details.properties.medium.anyOf);i?n.medium_details.medium=i:n.medium_details.Other_medium=r}var o=e["Growth temperature"];o&&(n.growth_temperature=1*o);var s=e.Aeration;s&&(n.aeration=s);var l=e["Growth time"];l&&(n.growing_time=1*l);var m=e["Growth phase or OD"];m&&(n.growth_phase_OD=m);var c=e["Other growth conditions"];c&&(n.other_growth_conditions=c);var u=e["Metagenome details"],h=B(u,t.properties.experimental.properties.sample_preparation.items.properties.metagenome_details.properties.environment.anyOf);n.metagenome_details=h?{environment:h}:{Other_environment:u};var p=e["Metagenomic sample description"];return p&&(n.metagenomic_sample_description=p),n}(t,e)),i.add(h));var p=t["Extraction Method Label"];s.has(p)||(o.push(function(e,t){var n={extraction_method:e["Extraction Method Label"],solvents:[]};e["Extraction solvent"].split(";").forEach(function(e){var a=e.split("="),r=Object(L.a)(a,2),i=r[0],o=r[1],s=B(i,t.properties.experimental.properties.extraction_methods.items.properties.solvents.items.properties.solvent.anyOf);s?n.solvents.push({solvent:s,ratio:parseFloat(o)}):n.solvents.push({Other_solvent:i,ratio:parseFloat(o)})});var a=e["Other extraction details"];return a&&(n.other_extraction_parameters=a),n}(t,e)),s.add(p));var f=t["Instrumentation Method Label"];return m.has(f)||(l.push(function(e,t){var n={instrumentation_method:e["Instrumentation Method Label"]},a=e.Instrumentation,r=B(a,t.properties.experimental.properties.instrumentation_methods.items.properties.instrumentation.properties.instrument.anyOf);n.instrumentation=r?{instrument:r}:{other_instrument:a};var i=e["Column details"];i&&(n.column=i);var o=e["Instrument mode"];o&&(n.mode=B(o,t.properties.experimental.properties.instrumentation_methods.items.properties.mode.anyOf));var s=e["Mass range"];s&&(n.range=s);var l=e["Collision energy"];l&&(n.collision_energy=l);var m=e.Buffering;m&&(n.buffering=m);var c=e["Other instrumentation information"];return c&&(n.other_instrumentation=c),n}(t,e)),m.add(f)),{genome_label:u,metabolomics_file:c,sample_preparation_label:h,extraction_method_label:p,instrumentation_method_label:f}});return{version:"1",personal:{},metabolomics:{},genomes:n,experimental:{sample_preparation:r,extraction_methods:o,instrumentation_methods:l},genome_metabolome_links:c}}var T=function(e){if(!e.data.genome_metabolome_links)return a.createElement("p",null,"No links between (meta)genomes and metabolimics data files.");var t=new D(e.schema,e.data),n=new M(e.schema,e.data),r=new C(e.schema,e.data),i=new I(e.schema,e.data),o=e.schema.properties.genome_metabolome_links.items.properties,s=new Set([t.fk,n.fk,r.fk,i.fk]),l=Object.keys(o).filter(function(e){return!s.has(e)}),m=l.map(function(e){var t=o[e];return a.createElement("th",{key:e},t.title)}),c=t.ths(m.length);m=m.concat(c);var u=n.ths(m.length);m=m.concat(u);var h=r.ths(m.length);m=m.concat(h);var p=i.ths(m.length);m=m.concat(p);var f=e.data.genome_metabolome_links.map(function(e,o){var s=l.map(function(t,n){return"Metabolomics_Data_File"===t?a.createElement("td",{key:n},a.createElement("a",{href:e[t]},e[t])):a.createElement("td",{key:n},e[t])}),m=t.tds(e,s.length);s=s.concat(m);var c=n.tds(e,s.length);s=s.concat(c);var u=r.tds(e,s.length);s=s.concat(u);var h=i.tds(e,s.length);return s=s.concat(h),a.createElement("tr",{key:o},s)}),d="paired-"+e.data.metabolomics.GNPSMassIVE_ID+"-genome-metabolome.tsv";return a.createElement("div",null,a.createElement(S.a,{condensed:!0,striped:!0,bordered:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:l.length}),a.createElement("th",{colSpan:c.length},o[t.fk].title),a.createElement("th",{colSpan:u.length},o[n.fk].title),a.createElement("th",{colSpan:h.length},o[r.fk].title),a.createElement("th",{colSpan:p.length},o[i.fk].title)),a.createElement("tr",null,m)),a.createElement("tbody",null,f)),a.createElement("a",{href:F(e.schema,e.data),download:d},"tab delimited downoad"))};var U=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n=btoa(JSON.stringify(e,null,4));return"data:".concat(t,";base64,").concat(n)}(e.data),n=e.schema.properties.personal.properties,r=Object.keys(n).map(function(t){var r=n[t];return a.createElement("li",{key:t},r.title,": ",e.data.personal[t])}),i=e.schema.properties.metabolomics.properties,o=Object.keys(i).map(function(t){var n=i[t];return a.createElement("li",{key:t},n.title,": ",e.data.metabolomics[t])}),s=e.data.metabolomics.GNPSMassIVE_ID,l="paired_datarecord_".concat(s,".json");return a.createElement("div",null,a.createElement("h3",null,"iOMEGA Paired data record:"),a.createElement(f.a,{href:t,download:l},a.createElement(d.a,{glyph:"download"})," Download"),a.createElement("h2",null,"Submitter Information"),a.createElement("ul",null,r),a.createElement("h2",null,"Metabolomics project details"),a.createElement("ul",null,o),a.createElement("h2",null,"Links between genomes and metabolomics data"),a.createElement(T,{data:e.data,schema:e.schema}),a.createElement("h2",null,"Linked gene clusters and MS2 spectra"),a.createElement(w,{data:e.data,schema:e.schema}))},A=(n(310),{collapsible:k.a,foreignKey:y,gmarray:function(e){var t=a.useRef(null);return a.createElement("div",null,a.createElement(x.a,e),a.createElement(f.a,{onClick:function(){t.current&&t.current.click()},title:"Upload links from tab delimited file, will replace existing links, (meta)genomes and metabolomics experimental details"},a.createElement(d.a,{glyph:"upload"})," Upload links",a.createElement("input",{type:"file",accept:"text/tab-separated-values,.tsv,.txt",onChange:function(t){if(t.target.files){var n=t.target.files[0],a=new FileReader;a.onload=function(){if(a.result){var t=Object(E.a)(a.result);e.formContext.uploadGenomeMetabolomeLinks(t)}},a.readAsText(n)}},ref:t,style:{display:"none"}})))}}),K=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={schema:{},uiSchema:{},initDoc:{},validDoc:void 0},n.uploadRef=void 0,n.formRef=void 0,n.searchLabels=function(e){var t=n.formRef.current;if(!t)return[];var a=t.state.formData;if(!a)return[];if("genome_label"===e)return a.genomes?a.genomes.map(function(e){return e.genome_label}):[];if("sample_preparation_label"===e)return a.experimental.sample_preparation?a.experimental.sample_preparation.map(function(e){return e.sample_preparation_method}):[];if("extraction_method_label"===e)return a.experimental.extraction_methods?a.experimental.extraction_methods.map(function(e){return e.extraction_method}):[];if("instrumentation_method_label"===e)return void 0===a.experimental.instrumentation_methods?[]:a.experimental.instrumentation_methods.map(function(e){return e.instrumentation_method});if("MS2_URL"===e)return a.genome_metabolome_links?a.genome_metabolome_links.map(function(e){return e.metabolomics_file}):[];throw new Error("Unknown link")},n.onSubmit=function(e){var t=e.formData;n.setState({validDoc:t,initDoc:t})},n.onReset=function(){n.setState({initDoc:{},validDoc:void 0})},n.uploadGenomeMetabolomeLinks=function(e){var t=N(n.state.schema,e),a=n.state.initDoc;a.genomes=t.genomes,a.experimental=t.experimental,a.genome_metabolome_links=t.genome_metabolome_links,a.personal||(a.personal={PI_email:void 0,PI_institution:void 0,PI_name:void 0,submitter_email:void 0,submitter_institution:void 0,submitter_name:void 0}),a.metabolomics||(a.metabolomics={GNPSMassIVE_ID:void 0,MaSSIVE_URL:void 0}),n.fillForm(a)},n.onUpload=function(){n.uploadRef.current&&n.uploadRef.current.click()},n.fillFormFromFile=function(e){if(e.target.files){var t=e.target.files[0],a=new FileReader;a.onload=function(e){if(a.result){var t=JSON.parse(a.result);n.fillForm(t)}},a.readAsText(t)}},n.validate=function(e,t){if(e.experimental.extraction_methods&&e.experimental.extraction_methods.forEach(function(e,n){e.solvents.reduce(function(e,t){return t.ratio+e},0)>1&&t.experimental.extraction_methods[n].solvents.addError("Combined ratio not within 0 and 1")}),!e.genome_metabolome_links)return t;var a=n.searchLabels("genome_label"),r=n.searchLabels("sample_preparation_label"),i=n.searchLabels("extraction_method_label"),o=n.searchLabels("instrumentation_method_label");if(e.genome_metabolome_links.forEach(function(e,n){e.genome_label&&!a.includes(e.genome_label)&&t.genome_metabolome_links[n].genome_label.addError("Invalid selection"),e.sample_preparation_label&&!r.includes(e.sample_preparation_label)&&t.genome_metabolome_links[n].sample_preparation_label.addError("Invalid selection"),e.extraction_method_label&&!i.includes(e.extraction_method_label)&&t.genome_metabolome_links[n].extraction_method_label.addError("Invalid selection"),e.instrumentation_method_label&&!o.includes(e.instrumentation_method_label)&&t.genome_metabolome_links[n].instrumentation_method_label.addError("Invalid selection")}),e.BGC_MS2_links){var s=n.searchLabels("MS2_URL");e.BGC_MS2_links.forEach(function(e,n){e.MS2_URL&&!s.includes(e.MS2_URL)&&t.BGC_MS2_links[n].MS2_URL.addError("Invalid selection")})}return t},n.loadExample1=function(){fetch("examples/paired_datarecord_MSV000078839_example.json").then(function(e){return e.json()}).then(n.fillForm)},n.fillForm=function(e){n.setState({initDoc:e,validDoc:void 0},function(){var e=n.formRef.current;e&&e.submit()})},n.uploadRef=a.createRef(),n.formRef=a.createRef(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("schema.json").then(function(e){return e.json()}).then(function(t){return e.setState({schema:t})}),fetch("uischema.json").then(function(e){return e.json()}).then(function(t){t.genome_metabolome_links.items.genome_label.foreignKey.search=e.searchLabels.bind(e),t.genome_metabolome_links.items.sample_preparation_label.foreignKey.search=e.searchLabels.bind(e),t.genome_metabolome_links.items.extraction_method_label.foreignKey.search=e.searchLabels.bind(e),t.genome_metabolome_links.items.instrumentation_method_label.foreignKey.search=e.searchLabels.bind(e),t.BGC_MS2_links.items.MS2_URL.foreignKey.search=e.searchLabels.bind(e),e.setState({uiSchema:t})})}},{key:"render",value:function(){var e={uploadGenomeMetabolomeLinks:this.uploadGenomeMetabolomeLinks};return a.createElement("div",{className:"App"},Object.keys(this.state.schema).length>0&&Object.keys(this.state.uiSchema).length>0&&a.createElement(_.a,{schema:this.state.schema,uiSchema:this.state.uiSchema,fields:A,formData:this.state.initDoc,onSubmit:this.onSubmit,validate:this.validate,formContext:e,ref:this.formRef},a.createElement(h.a,null,a.createElement(p.a,null,a.createElement(f.a,{onClick:this.loadExample1,title:"Load example dataset"},a.createElement(d.a,{glyph:"paperclip"})," Example"),a.createElement(f.a,{onClick:this.onUpload,title:"Upload JSON file"},a.createElement(d.a,{glyph:"upload"})," Upload",a.createElement("input",{type:"file",accept:"application/json,.json",onChange:this.fillFormFromFile,ref:this.uploadRef,style:{display:"none"}}))),a.createElement(p.a,null,a.createElement(f.a,{type:"submit",bsStyle:"primary"},a.createElement(d.a,{glyph:"ok"})," Save"),a.createElement(f.a,{type:"reset",onClick:this.onReset},a.createElement(d.a,{glyph:"remove"})," Reset")))),this.state.validDoc&&a.createElement(U,{data:this.state.validDoc,schema:this.state.schema}))}}]),t}(a.Component);n(311),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(312),n(313);o.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[154,1,2]]]);
//# sourceMappingURL=main.921c48de.chunk.js.map